_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[17],{"20a2":function(e,t,n){e.exports=n("nOHt")},"3bsq":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=s,t.push=l,t.default=void 0;var r,a=(r=n("20a2"))&&r.__esModule?r:{default:r};function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(s){a=!0,c=s}finally{try{r||null==o.return||o.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var o=function(e,t){var n=!1;return t.forEach((function(t){e.match(t)&&(n=!0)})),n};function s(e){var t=e.url,n=e.siteId,r=e.jsTrackerFile,i=void 0===r?"matomo.js":r,s=e.phpTrackerFile,u=void 0===s?"matomo.php":s,d=e.excludeUrlsPatterns,f=void 0===d?[]:d;if(window._paq=window._paq||[],t){var j="";"undefined"!==typeof window&&o(window.location.pathname,f)?"undefined"!==typeof window&&console.log("matomo: exclude track ".concat(window.location.pathname)):l(["trackPageView"]),l(["enableLinkTracking"]),l(["setTrackerUrl","".concat(t,"/").concat(u)]),l(["setSiteId",n]);var p=document.createElement("script"),b=document.getElementsByTagName("script")[0];p.type="text/javascript",p.async=!0,p.defer=!0,p.src="".concat(t,"/").concat(i),b.parentNode.insertBefore(p,b),j=location.pathname,a.default.events.on("routeChangeComplete",(function(e){if(o(e,f))console.log("matomo: exclude track ".concat(e));else{var t=c(e.split("?"),1)[0];setTimeout((function(){var e=a.default.query.q;j&&l(["setReferrerUrl","".concat(j)]),l(["setCustomUrl",t]),l(["setDocumentTitle",document.title]),l(["deleteCustomVariables","page"]),l(["setGenerationTimeMs",0]),/^\/recherche/.test(t)||/^\/search/.test(t)?l(["trackSiteSearch",e]):l(["trackPageView"]),j=t}),0)}}))}else console.warn("Matomo disabled, please provide matomo url")}function l(e){window._paq.push(e)}var u=s;t.default=u},"4pqH":function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/lecteur/pole-emploi",function(){return n("o5HA")}])},BsWD:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("a3WO");function a(e,t){if(e){if("string"===typeof e)return Object(r.a)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r.a)(e,t):void 0}}},KQm4:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("a3WO");var a=n("BsWD");function c(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(a.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},RHh3:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("s4An");function a(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e,t,n){return(c=a()?Reflect.construct:function(e,t,n){var a=[null];a.push.apply(a,t);var c=new(Function.bind.apply(e,a));return n&&Object(r.a)(c,n.prototype),c}).apply(null,arguments)}},a3WO:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,"a",(function(){return r}))},aIN1:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("nKUr"),a=n("oRLf"),c=n("vRNQ"),i=n.n(c);function o(e){var t=e.pourquoi,n=e.text,c=e.subject;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h2",{id:"pourquoi",className:i.a.subtitle,children:t}),n,Object(r.jsxs)("p",{className:i.a.description,children:["Un probl\xe8me, une question ? Contactez-nous \xe0 ",Object(r.jsx)(a.a,{subject:c,children:"data.insertion@beta.gouv.fr"})]})]})}},h9AH:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("nKUr"),a=n("q1tI"),c=n("vRNQ"),i=n.n(c);function o(e){var t=e.fileSize;return Object(r.jsxs)("p",{className:i.a.pending_warning,children:["Calcul des statistiques en cours, merci de patienter",t>1e8&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("br",{}),"Pour les fichiers sup\xe9rieurs \xe0 100 Mo, le temps de traitement peut d\xe9passer 1 minute."]})]})}function s(e){var t=e.handleFile,n=e.isPending,c=e.fileSize,s=Object(a.useCallback)((function(e){for(var n=0;n<e.target.files.length;n++)t(e.target.files[n]);e.target.value=""}));return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("p",{className:i.a.description,children:["Glissez et d\xe9posez le fichier \xe0 analyser ou s\xe9lectionnez le.",Object(r.jsx)("br",{}),Object(r.jsx)("input",{type:"file",onChange:s,multiple:!0})]}),n&&Object(r.jsx)(o,{fileSize:c}),Object(r.jsxs)("p",{className:i.a.description,children:["Les op\xe9rations sont toutes r\xe9alis\xe9es sur votre ordinateur.",Object(r.jsx)("br",{}),"Aucune donn\xe9e personnelle n'est transf\xe9r\xe9e."]})]})}},mPdc:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l}));var r=n("KQm4"),a=n("rePB"),c=n("3bsq");function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e){return e||[]}function l(e){return function(t,n){switch(n.type){case"append":var a=o(o({},n.item),{},{seed:void 0});return Object(c.push)(["trackEvent",e,JSON.stringify(a)]),[n.item].concat(Object(r.a)(t));case"reset":return s(n.items);default:throw new Error}}}},o5HA:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return h}));var r=n("nKUr"),a=n("RHh3"),c=n("KQm4"),i=n("q1tI"),o=n("CafY"),s=n("h9AH"),l=n("aIN1"),u=n("vRNQ"),d=n.n(u),f=n("mPdc"),j=Object(f.b)("Test - Pole Emploi"),p=!1,b={M:"Mensuel"},m={PECG:"PE vers CD"};function h(){var e=Object(i.useState)(null),t=e[0],n=(e[1],Object(i.useReducer)(j,[],f.a)),u=n[0],h=n[1],O=Object(i.useState)(!1),y=O[0],g=O[1],v=Object(i.useState)(0),x=v[0],w=v[1];Object(i.useEffect)((function(){t&&S(t)}),[t]);var S=function(e){w(e.size),g(!0);var t=new Date,n=new FileReader;n.onload=function(n){var r=(new DOMParser).parseFromString(n.target.result,"application/xml"),i=r.getElementsByTagName("entete")[0],o=i.getElementsByTagName("periodicite")[0].innerHTML,s=i.getElementsByTagName("fichier")[0].innerHTML,l=i.getElementsByTagName("departement")[0].innerHTML,u=i.getElementsByTagName("date-reference")[0].innerHTML,d=i.getElementsByTagName("date-fabrication")[0].innerHTML,f=Object(a.a)(Array,Object(c.a)(r.getElementsByTagName("dossier"))),j=f.filter((function(e){return e.getElementsByTagName("date-dernier-ent").length})),p=f.filter((function(e){var t=e.getElementsByTagName("date-dernier-ent");return t.length&&t[0].innerHTML.match(/\d{4}-\d{2}-\d{2}/)}));g(!1),h({type:"append",item:{seed:Math.random(),timestamp:(new Date).toISOString().slice(0,19),duration:new Date-t,filename:e.name,frequency:o,referenceDate:u,generationDate:d,departement:l,type:s,error:r.activeElement&&"parsererror"==r.activeElement.nodeName,total:f.length,withLastMeetingDate:j.length,withUsableLastMeetingDate:p.length,fileSize:e.size}})},n.readAsText(e)},N=function(e){return Math.round(e)};return Object(r.jsx)(o.a,{className:d.a.container,handleFile:S,children:Object(r.jsxs)("main",{className:d.a.main,children:[Object(r.jsx)("h1",{className:d.a.title,children:"Analyser les fichiers P\xf4le Emploi"}),Object(r.jsx)(s.a,{handleFile:S,isPending:y,fileSize:x}),u&&u.length>0&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h2",{className:d.a.subtitle,children:"Historique"}),Object(r.jsxs)("table",{children:[Object(r.jsxs)("thead",{children:[Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{rowSpan:"2",children:"Date"}),Object(r.jsx)("th",{rowSpan:"2",children:"Fichier"}),p,p,Object(r.jsx)("th",{rowSpan:"2",children:"Date de r\xe9f\xe9rence"}),Object(r.jsx)("th",{rowSpan:"2",children:"Date de fabrication"}),Object(r.jsx)("th",{rowSpan:"2",children:"Fr\xe9quence"}),Object(r.jsx)("th",{rowSpan:"2",children:"Nature"}),Object(r.jsx)("th",{rowSpan:"2",children:"CD"}),Object(r.jsx)("th",{rowSpan:"2",children:"Dossiers"}),Object(r.jsx)("th",{colSpan:"2",rowSpan:"2",children:"avec date de dernier entretien PPAE (%)"}),Object(r.jsx)("th",{colSpan:"2",rowSpan:"2",children:Object(r.jsxs)("abbr",{title:"Par valide, on veut dire contient une date au format AAA-MM-JJ",children:["avec date de dernier entretien PPAE ",Object(r.jsx)("i",{children:"valide"})," (%)"]})}),Object(r.jsx)("th",{rowSpan:"2",children:"Erreur"})]}),Object(r.jsx)("tr",{})]}),Object(r.jsx)("tbody",{children:u.map((function(e,t){return Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:e.timestamp}),Object(r.jsx)("td",{children:e.filename}),p,p,Object(r.jsx)("td",{children:e.referenceDate}),Object(r.jsx)("td",{children:e.generationDate}),Object(r.jsx)("td",{children:"".concat(e.frequency," (").concat(b[e.frequency]||"?",")")}),Object(r.jsx)("td",{children:"".concat(e.type," (").concat(m[e.type]||"?",")")}),Object(r.jsx)("td",{className:"shrink",children:e.departement}),Object(r.jsx)("td",{className:d.a.numeric,children:e.total}),Object(r.jsx)("td",{children:e.withLastMeetingDate}),Object(r.jsx)("td",{className:"shrink",children:N(e.withLastMeetingDate/e.total*100)}),Object(r.jsx)("td",{children:e.withUsableLastMeetingDate}),Object(r.jsx)("td",{className:"shrink",children:N(e.withUsableLastMeetingDate/e.total*100)}),Object(r.jsx)("td",{children:e.error?"Oui":"Non"})]},"".concat(e.timestamp,"-").concat(e.filename,"-").concat(e.seed))}))})]}),Object(r.jsx)("button",{onClick:function(){return h({type:"reset"})},children:"Vider l'historique"})]}),Object(r.jsx)(l.a,{subject:"Flux Pole Emploi",pourquoi:"Pourquoi un lecteur de fichier P\xf4le Emploi\xa0?",text:Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("p",{className:d.a.text,children:"Tous les d\xe9partements n'ont pas les outils pour analyser les fichiers envoy\xe9s par P\xf4le Emploi. Cela peut ralentir et compliquer nos \xe9changes."}),Object(r.jsx)("p",{className:d.a.text,children:"Avec cet outil, nous souhaitons permettre aux personnes qui ont acc\xe8s \xe0 ces fichiers d'en extraire des statistiques g\xe9n\xe9rales sans avoir \xe0 mettre les mains dans le camboui elles-m\xeame."})]})})]})})}},rePB:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return r}))},s4An:function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",(function(){return r}))}},[["4pqH",0,2,1,3]]]);