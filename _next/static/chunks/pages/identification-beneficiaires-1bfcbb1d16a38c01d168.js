_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[13],{CwUp:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return s}));var i=n("KQm4"),r=function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return t.reduce((function(t,i){return void 0!==i[e]&&(t[i[e]]=(t[i[e]]||0)+1,n&&(t.Total=(t.Total||0)+1)),t}),{})},a=function(t,e){return t.reduce((function(t,e){return t=t.concat(Object.keys(e)),Array.from(new Set(t))}),[])},s=function(t,e){return Object(i.a)(new Set([].concat(Object(i.a)(Object.keys(t)),Object(i.a)(Object.keys(e))))).reduce((function(n,i){return n[i]=(t[i]||0)+(e[i]||0),n}),{})}},FB2r:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/identification-beneficiaires",function(){return n("gPHx")}])},GYdj:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return a}));var i={M:"Mensuel",I:"Quotidien",R:"Reprise"},r={D:"B\xe9n\xe9ficiaires",I:"Instructions",R:"Nouveau recueil"},a={DEM:"Demandeur",CJT:"Conjoint",ENF:"Enfant",AUT:"Autre"}},Ji7U:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n("s4An");function r(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Object(i.a)(t,e)}},K7qT:function(t,e,n){t.exports={rules_container:"NewApplicantsRules_rules_container__3KR81",image_container:"NewApplicantsRules_image_container__30tpS",rules_image:"NewApplicantsRules_rules_image__xcLAK"}},Svyj:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var i=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i="data:text/csv;charset=utf-8,"+n.join(";")+"\n"+e.map((function(t){return t.join(";")})).join("\n"),r=encodeURI(i),a=document.createElement("a");a.setAttribute("href",r),a.setAttribute("download",t),document.body.appendChild(a),a.click()}},e6fs:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var i=n("KQm4"),r=n("1OyB"),a=n("vuIU"),s=n("Ji7U"),c=n("md7G"),o=n("foSv"),u=n("DCjv"),l=n("oIwm"),p=(n("z4L3"),n("CwUp"));function f(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Object(o.a)(t);if(e){var r=Object(o.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(c.a)(this,n)}}var d=function(t){Object(s.a)(n,t);var e=f(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(a.a)(n,[{key:"applications",get:function(){return Object(i.a)(this.dom.getElementsByTagName("InfoDemandeRSA")).map((function(t){return new l.a(t)}))}},{key:"applicationsWithEmail",get:function(){return this.applications.filter((function(t){return t.emailAddress}))}},{key:"applicationsWithUsableEmail",get:function(){return this.applications.filter((function(t){return t.withUsableEmail()}))}},{key:"applicationsWithForbiddenEmailUsage",get:function(){return this.applications.filter((function(t){return t.withForbiddenEmailUsage()}))}},{key:"applicationsWithoutEmailUsage",get:function(){return this.applications.filter((function(t){return t.withoutEmailUsage()}))}},{key:"applicatonsWithPhone",get:function(){return this.applications.filter((function(t){return t.phoneNumber}))}},{key:"applicationsWithUsablePhone",get:function(){return this.applications.filter((function(t){return t.withUsablePhone()}))}},{key:"applicationsWithForbiddenPhoneUsage",get:function(){return this.applications.filter((function(t){return t.withForbiddenPhoneUsage()}))}},{key:"applicationsWithoutPhoneUsage",get:function(){return this.applications.filter((function(t){return t.withoutPhoneUsage()}))}},{key:"applicationsWithDSP",get:function(){return this.applications.filter((function(t){return t.withDSP()}))}},{key:"applicantsWithDSP",get:function(){return this.applicants.filter((function(t){return t.socioProfessionalData}))}},{key:"applicantsPersonalData",get:function(){return this.applicants.map((function(t){return t.personalData()}))}},{key:"nationalitiesPartition",get:function(){return Object(p.a)(this.applicants,"nationality",!1)}},{key:"dspRolesPartition",get:function(){return Object(p.a)(this.applicantsWithDSP,"role")}},{key:"activitiesPartition",get:function(){return Object(p.a)(this.applicants,"activity",!1)}}]),n}(u.a)},foSv:function(t,e,n){"use strict";function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.d(e,"a",(function(){return i}))},gPHx:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return P}));var i=n("nKUr"),r=n("Ff2n"),a=n("ODXe"),s=n("rePB"),c=n("o0o1"),o=n.n(c),u=n("HaE+"),l=n("CafY"),p=n("RPyZ"),f=n("K7qT"),d=n.n(f);function b(){return Object(i.jsxs)("div",{className:d.a.rules_container,children:[Object(i.jsx)("p",{children:"L'identification des nouveaux entrants est souvent difficile \xe0 mettre \xe0 place par les d\xe9partements. Cet outil vous permet d'obtenir des listes de nouveaux entrants que vous pourrez comparer avec les listes obtenues dans votre d\xe9partement. Nous utilisons aujourd'hui deux m\xe9thodes:"}),Object(i.jsxs)("ul",{children:[Object(i.jsxs)("li",{children:[Object(i.jsxs)("p",{children:["L'utilisation de la variable ",Object(i.jsx)("strong",{children:"TOPPERSENTDRODEVORSA"}),", pr\xe9sente dans le flux b\xe9n\xe9ficiaire quotidien. Elle signale si la personne est entrante en droits et devoirs depuis le dernier flux quotidien. Cette balise n'est pr\xe9sente que pour les personnes ayant un \xe0",Object(i.jsx)("strong",{children:' "1"'})," et sous deux conditions:"]}),Object(i.jsxs)("ul",{children:[Object(i.jsx)("li",{children:Object(i.jsx)("p",{children:"Il existe un droit r\xe9el ou th\xe9orique au RSA"})}),Object(i.jsx)("li",{children:Object(i.jsx)("p",{children:"Absence de contrat d'engagement et/ou de projet personnel d'accompagnement pour la personne sur le mois de d\xe9but du top personne soumis \xe0 droits et devoirs dans les dossiers CAF"})})]})]}),Object(i.jsxs)("li",{children:[Object(i.jsxs)("p",{children:["Le croisement de plusieurs balises des flux b\xe9n\xe9ficiaires quotidien ou mensuel (sans utiliser le TOPPERSENTDRODEVORSA). Cette m\xe9thode permet de reconstituer les cat\xe9gories de nouveaux entrants d\xe9finies dans l'instruction du 19 mars 2021, comme pr\xe9sent\xe9 dans le tableau suivant (la cat\xe9gorie num\xe9ro ",Object(i.jsx)("strong",{children:'"5"'})," n'est pas prise en compte par cet outil):"]}),Object(i.jsx)("div",{className:d.a.image_container,children:Object(i.jsx)("img",{src:"./new_applicants_rules.png",alt:"new_applicants_rules",className:d.a.rules_image})})]})]})]})}var j=n("vRNQ"),h=n.n(j),O=n("GYdj"),m=n("q1tI"),x=n("PQ1l"),v=n("opCb"),y=n("e6fs"),g=n("Svyj"),E=n("jwbB");function N(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function D(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?N(Object(n),!0).forEach((function(e){Object(s.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var w=Object(x.b)("Test - CNAF - Identification nouveaux demandeurs");function P(){var t=Object(m.useState)(0),e=t[0],n=t[1],s=Object(m.useState)(!1),c=s[0],f=(s[1],Object(m.useReducer)(w,[],x.a)),d=f[0],j=f[1],N=Object(m.useState)("b\xe9n\xe9ficiaires"),P=N[0],R=N[1],A=Object(m.useState)(!1),S=A[0],_=A[1],k=[],T=function(){var t=Object(u.a)(o.a.mark((function t(e){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("b\xe9n\xe9ficiaires"!=P){t.next=5;break}return t.next=3,C(e);case 3:t.next=7;break;case 5:return t.next=7,U(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),C=function(){var t=Object(u.a)(o.a.mark((function t(e){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(e.size),t.next=3,new Promise((function(t){var n=new FileReader;n.onload=function(n){var i=new v.a(n.target.result),r=i.applicantsEligibleAsNew,a=i.applicantsObject,s=i.topEntrants.reduce((function(t,e){return t[e.id]=D(D({},e.personalData()),{},{isTopEntrant:!0}),t}),{}),c=i.creationDate;if("B\xe9n\xe9ficiaires"!==O.c[i.origin])return alert("Vous n'avez pas upload\xe9 un flux ".concat(P," \ud83d\uded1!")),void t();if(d.map((function(t){return t.fileName})).includes(e.name))return alert("le fichier ".concat(e.name," a d\xe9j\xe0 \xe9t\xe9 upload\xe9 \ud83d\uded1!")),void t();[d,k].forEach((function(t){var e,n=null===(e=t.find((function(t){return t.creationDate===Object(E.e)(c)})))||void 0===e?void 0:e.applicants;n&&r.forEach((function(t){var e=n[t.id];e&&(t.withDroitsEtDevoirs()&&!e.withDroitsEtDevoirs()&&(s[t.id]=D(D(D({},s[t.id]),t.personalData()),{},{category:"1-2-3"})),t.eligibleAsNewInFoyer()&&!e.inFoyerWithDroitsEtDevoirs()&&(s[t.id]=D(D(D({},s[t.id]),t.personalData()),{},{category:"4"})))}))}));var o={seed:Math.random(),newApplicantsData:s,applicants:a,applicantsEligibleAsNew:r,fileName:e.name,creationDate:c};k.push(o),j({type:"append",item:o}),t()},n.readAsText(e)}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),U=function(){var t=Object(u.a)(o.a.mark((function t(e){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(e.size),t.next=3,new Promise((function(t){var n=new FileReader;n.onload=function(n){var i=new y.a(n.target.result);if("Instructions"!==O.c[i.origin])return alert("Vous n'avez pas upload\xe9 un flux ".concat(P," \ud83d\uded1!")),void t();j({type:"replace",items:F(i,e.name)}),t()},n.readAsText(e)}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),F=function(t,e){return d.map((function(n){return D(D({},n),{},{newApplicantsData:I(t.applicants,e,n.newApplicantsData)})}))},I=function(t,e,n){return Object.entries(n).forEach((function(i){var r=Object(a.a)(i,2),s=r[0],c=r[1],o=t.find((function(t){return t.rsaApplicationNumber===c.rsaApplicationNumber}));o&&(n[s]=D(D({instructionFileName:e},c),o.contactInfos()))})),n},W=d.some((function(t){return Object.values(t.newApplicantsData).some((function(t){return t.emailAddress}))})),V=d.some((function(t){return Object.values(t.newApplicantsData).some((function(t){return t.phoneNumber}))})),z=W||V;return Object(i.jsx)(l.a,{className:h.a.container,handleFile:T,children:Object(i.jsxs)("main",{className:h.a.main,children:[Object(i.jsx)("h1",{children:"Identifiez les nouveaux demandeurs \xe0 l'aide des flux CNAF"}),Object(i.jsxs)("ol",{children:[Object(i.jsxs)("li",{style:"b\xe9n\xe9ficiaires"===P?{fontWeight:"bold"}:{},children:['Uploadez le ou les fichiers "b\xe9n\xe9ficiaires" pour identifier les nouveaux demandeurs'," ","(< 100 Mo) "]}),Object(i.jsx)("br",{}),Object(i.jsxs)("li",{children:[" ",'Une fois les flux b\xe9n\xe9ficiaires upload\xe9s, cliquez sur "Passer aux flux d\'instructions"']}),Object(i.jsx)("br",{}),Object(i.jsx)("li",{style:"instructions"===P?{fontWeight:"bold"}:{},children:'Uploadez le ou les fichiers "instructions" associ\xe9s pour r\xe9cup\xe9rer les donn\xe9es de contact des demandeurs.'})]}),!S&&Object(i.jsx)("button",{className:h.a.button,onClick:function(){return _(!0)},children:"Voir les r\xe8gles d'identifications"}),S&&Object(i.jsx)("button",{className:h.a.button,onClick:function(){return _(!1)},children:"Cacher les r\xe8gles d'identifications"}),S&&Object(i.jsx)(b,{}),Object(i.jsx)(p.a,{handleFile:T,isPending:c,fileSize:e,sortFilesByFluxDate:!0,uploadMessage:["Glissez et d\xe9posez les flux ",Object(i.jsx)("strong",{children:P})," \xe0 analyser ou s\xe9lectionnez-les."],pendingMessage:["Traitement en cours, merci de patienter.",Object(i.jsx)("br",{}),"L'identification peut prendre du temps (> 1 minute) lorsque plusieurs fichiers sont upload\xe9s"]}),d&&d.length>0&&Object(i.jsxs)(i.Fragment,{children:["b\xe9n\xe9ficiaires"===P&&Object(i.jsx)("button",{className:h.a.button,onClick:function(){return R("instructions")},children:"Passer aux flux instructions"}),"instructions"===P&&Object(i.jsx)("button",{className:h.a.button,onClick:function(){return R("b\xe9n\xe9ficiaires")},children:"Revenir aux flux b\xe9n\xe9ficiaires"}),Object(i.jsxs)("div",{className:h.a.button_group,children:[Object(i.jsx)("div",{style:{marginRight:"20px"},children:Object(i.jsxs)("button",{className:h.a.button,onClick:function(){var t=[];d.forEach((function(e){Object.values(e.newApplicantsData).forEach((function(n){t.push([n.rsaApplicationNumber||"",n.socialSecurityNumber||"",n.lastName||"",n.firstName||"",O.a[n.role]||"",n.emailAddress||"",n.phoneNumber||"",n.isTopEntrant?"OUI":"NON",void 0===n.category?"NON":"OUI - Cat\xe9gorie ".concat(n.category),e.fileName,n.instructionFileName||""])}))}));var e="nouveaux_demandeurs_rsa_"+Object(E.b)()+".csv";Object(g.a)(e,t,["NUMERO DEMANDE RSA","NIR","NOM","PRENOM","ROLE","EMAIL","TELEPHONE","ENTRANT SELON TOPPERSENTDRODEVORSA","ENTRANT SELON AUTRES CRITERES","FICHIER SOURCE","FICHIER D'INSTRUCTION"])},children:[" ","Exporter au format CSV"," "]})}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{className:h.a.button,onClick:function(){j({type:"reset"}),R("b\xe9n\xe9ficiaires")},children:"Vider l'historique"})})]}),Object(i.jsx)("div",{children:Object(i.jsxs)("table",{className:h.a.applicants_table,children:[Object(i.jsx)("thead",{children:Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{children:"Num\xe9ro de demande RSA"}),Object(i.jsx)("th",{children:"NIR"}),Object(i.jsx)("th",{children:"Nom"}),Object(i.jsx)("th",{children:"Pr\xe9nom"}),Object(i.jsx)("th",{children:"R\xf4le"}),W&&Object(i.jsx)("th",{children:"Email"}),V&&Object(i.jsx)("th",{children:"T\xe9l\xe9phone"}),Object(i.jsx)("th",{children:"Entrant selon TOPPERSENTDRODEVORSA"}),Object(i.jsx)("th",{children:"Entrant selon d'autres crit\xe8res"}),Object(i.jsx)("th",{children:"Ficher source "}),z&&Object(i.jsx)("th",{children:"Fichier d'instruction"})]})}),Object(i.jsx)("tbody",{children:d.map((function(t){var e=t.newApplicantsData,n=t.fileName;Object(r.a)(t,["newApplicantsData","fileName"]);return Object.entries(e).map((function(t){var e=Object(a.a)(t,2),r=e[0],s=e[1],c=[r,n].join("-");return Object(i.jsxs)("tr",{children:[Object(i.jsx)("td",{children:s.rsaApplicationNumber}),Object(i.jsx)("td",{children:s.socialSecurityNumber}),Object(i.jsx)("td",{children:s.lastName}),Object(i.jsx)("td",{children:s.firstName}),Object(i.jsx)("td",{children:O.a[s.role]}),W&&Object(i.jsx)(i.Fragment,{children:Object(i.jsx)("td",{children:s.emailAddress||""})}),V&&Object(i.jsx)(i.Fragment,{children:Object(i.jsx)("td",{children:s.phoneNumber||""})}),Object(i.jsx)("td",{className:h.a.center,children:s.isTopEntrant?"OUI":"NON"}),Object(i.jsx)("td",{className:h.a.center,children:void 0===s.category?"NON":"OUI - Cat\xe9gorie ".concat(s.category)}),Object(i.jsx)("td",{children:n}),z&&Object(i.jsx)(i.Fragment,{children:Object(i.jsx)("td",{children:s.instructionFileName||""})})]},c)}))}))})]})})]})]})})}},md7G:function(t,e,n){"use strict";function i(t){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){return!e||"object"!==i(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}n.d(e,"a",(function(){return r}))},opCb:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var i=n("KQm4"),r=n("1OyB"),a=n("vuIU"),s=n("Ji7U"),c=n("md7G"),o=n("foSv"),u=n("DCjv"),l=n("oIwm"),p=n("CwUp");function f(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Object(o.a)(t);if(e){var r=Object(o.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(c.a)(this,n)}}var d=function(t){Object(s.a)(n,t);var e=f(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(a.a)(n,[{key:"applications",get:function(){return Object(i.a)(this.dom.getElementsByTagName("InfosFoyerRSA")).map((function(t){return new l.a(t)}))}},{key:"topEntrants",get:function(){return this.applicants.filter((function(t){return t.isTopEntrant()}))}},{key:"applicantsEligibleAsNew",get:function(){return this.applicants.filter((function(t){return t.eligibleAsNew()}))}},{key:"applicantsWithDroitsOuvertsEtVersables",get:function(){return this.applicants.filter((function(t){return t.application.withDroitsOuvertsEtVersables()}))}},{key:"partitions",get:function(){return{applicationsDatesPartition:this.applicationsDatesPartition,applicationsStatusCodesPartition:this.applicationsStatusCodesPartition,applicantsTopDroitsEtDevoirsPartition:this.applicantsTopDroitsEtDevoirsPartition,applicantsRolesPartition:this.applicantsRolesPartition,applicantsWithDroitsOuvertsEtVersablesTopDroitsEtDevoirsPartition:this.applicantsWithDroitsOuvertsEtVersablesTopDroitsEtDevoirsPartition}}},{key:"applicationsDatesPartition",get:function(){return Object(p.a)(this.applications,"date",!1)}},{key:"applicationsStatusCodesPartition",get:function(){return Object(p.a)(this.applications,"statusCode")}},{key:"applicantsTopDroitsEtDevoirsPartition",get:function(){return Object(p.a)(this.applicants,"topDroitsEtDevoirs")}},{key:"applicantsRolesPartition",get:function(){return Object(p.a)(this.applicants,"role")}},{key:"applicantsWithDroitsOuvertsEtVersablesTopDroitsEtDevoirsPartition",get:function(){return Object(p.a)(this.applicantsWithDroitsOuvertsEtVersables,"topDroitsEtDevoirs")}}]),n}(u.a)},s4An:function(t,e,n){"use strict";function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.d(e,"a",(function(){return i}))}},[["FB2r",0,2,1,3,4]]]);